import require$$0 from"axios";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function commonjsRequire(target){throw new Error('Could not dynamically require "'+target+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var _window,_window$Vue;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var axios,axios_,request,get,post,reqInterceptor,resInterceptor,version$1="3.0.4-beta.00",vueVersion=(null===(_window=window)||void 0===_window||null===(_window$Vue=_window.Vue)||void 0===_window$Vue?void 0:_window$Vue.version)||"",cancelList=new Map,queryMethodList=["get","delete","head","options"];getAxios();var CancelToken=axios.CancelToken;function getAxios(axios){if((axios_=axios)||("undefined"!=typeof window&&window.axios?axios_=window.axios:commonjsRequire&&(axios_=require$$0)),axios_)return axios_;console.error("你没有安装或者卸载了 axios，本插件依赖于 axios！")}function install(app,axios){var tmpAxios=getAxios(axios);tmpAxios&&(cAxios(),function(app,axios){var vueVersion=(null==app?void 0:app.version)||"";null!=vueVersion&&vueVersion.startsWith("3.")&&"object"===_typeof(app)&&(app.config.globalProperties.$http=axios),null!=vueVersion&&vueVersion.startsWith("2.")&&"function"==typeof app&&(app.prototype.$http=axios),app.axios=axios}(app,tmpAxios))}function handleDelCancelList(config){cancelList.delete(config.method+": "+config.url)}function cAxios(config){axios&&(reqInterceptor&&axios.interceptors.request.eject(reqInterceptor),resInterceptor&&axios.interceptors.response.eject(resInterceptor));var isCancelRepeat=config.cancelRepeat||!1;return(axios=axios_.create(config||{})).prototype.create=axios_.create,axios.prototype.Cancel=axios_.Cancel,axios.prototype.CancelToken=axios_.CancelToken,axios.prototype.isCancel=axios_.isCancel,axios.prototype.all=axios_.all,axios.prototype.spread=axios_.spread,isCancelRepeat&&function(axios){reqInterceptor=axios.interceptors.request.use([function(config){var source=CancelToken.source(),key=config.method+": "+config.url;return cancelList.has(key)&&cancelList.get(key).cancel("取消重复的请求，"+key),cancelList.set(key,source),config.cancelToken=source.token,Promise.resolve(config)}]),resInterceptor=axios.interceptors.response.use([function(res){return handleDelCancelList(res.config),Promise.resolve(res)},function(err){var config=err.config;return config&&handleDelCancelList(config),Promise.reject(err)}])}(axios),get=function(url){return request(url,"get")},post=function(url){return request(url,"post")},{request:request=function(url,method){var isQuery=queryMethodList.includes(method.toLocaleLowerCase());return function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return axios(_objectSpread(_objectSpread({url,method},isQuery?{params:data}:{data}),opts)).then((function(_ref){var _ref$data=_ref.data;return void 0===_ref$data?{}:_ref$data}))}},get,post,axios}}cAxios(),"undefined"!=typeof window&&window.axios&&window.Vue&&null!=vueVersion&&vueVersion.startsWith("2.")&&install(window.Vue,window.axios);var index={install,version:version$1};export default index;export{axios,cAxios,get,install,post,request,version$1 as version};
