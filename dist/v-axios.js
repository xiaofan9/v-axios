var global,factory;global=this,factory=function(exports,require$$0){"use strict";function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var require$$0__default=_interopDefaultLegacy(require$$0),defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj};function commonjsRequire(target){throw new Error('Could not dynamically require "'+target+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var _window,_window$Vue,_typeof_1=function(fn){var module={exports:{}};return fn(module,module.exports),module.exports}((function(module){function _typeof(obj){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=_typeof=function(obj){return typeof obj}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}module.exports=_typeof}));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var axios_,reqInterceptor,resInterceptor,vueVersion=(null===(_window=window)||void 0===_window||null===(_window$Vue=_window.Vue)||void 0===_window$Vue?void 0:_window$Vue.version)||"",cancelList=new Map,queryMethodList=["get","delete","head","options"];getAxios();var CancelToken=exports.axios.CancelToken;function getAxios(axios){if((axios_=axios)||("undefined"!=typeof window&&window.axios?axios_=window.axios:commonjsRequire&&(axios_=require$$0__default.default)),axios_)return axios_;console.error("你没有安装或者卸载了 axios，本插件依赖于 axios！")}function install(app,axios,config){var tmpAxios=getAxios(axios);tmpAxios&&(cAxios(config),function(app,axios){var vueVersion=(null==app?void 0:app.version)||"";null!=vueVersion&&vueVersion.startsWith("3.")&&"object"===_typeof_1(app)&&(app.config.globalProperties.$http=axios),null!=vueVersion&&vueVersion.startsWith("2.")&&"function"==typeof app&&(app.prototype.$http=axios),app.axios=axios}(app,tmpAxios))}function handleDelCancelList(config){var key=config.method+": "+config.url;cancelList.delete(key)}function cAxios(config){exports.axios&&(reqInterceptor&&exports.axios.interceptors.request.eject(reqInterceptor),resInterceptor&&exports.axios.interceptors.response.eject(resInterceptor));var axios,isCancelRepeat=config.cancelRepeat||!1;return exports.axios=axios_.create(config||{}),exports.axios.prototype.all=axios_.all,exports.axios.prototype.spread=axios_.spread,isCancelRepeat&&(axios=exports.axios,reqInterceptor=axios.interceptors.request.use([function(config){var source=CancelToken.source(),key=config.method+": "+config.url;return cancelList.has(key)&&cancelList.get(key).cancel("取消重复的请求，"+key),cancelList.set(key,source),config.cancelToken=source.token,Promise.resolve(config)}]),resInterceptor=axios.interceptors.response.use([function(res){return handleDelCancelList(res.config),Promise.resolve(res)},function(err){var config=err.config;return config&&handleDelCancelList(config),Promise.reject(err)}])),exports.request=function(url,method){var isQuery=queryMethodList.includes(method.toLocaleLowerCase());return function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return exports.axios(_objectSpread(_objectSpread({url:url,method:method},isQuery?{params:data}:{data:data}),opts)).then((function(_ref){var _ref$data=_ref.data;return void 0===_ref$data?{}:_ref$data}))}},exports.get=function(url){return exports.request(url,"get")},exports.post=function(url){return exports.request(url,"post")},{request:exports.request,get:exports.get,post:exports.post,axios:exports.axios}}cAxios(),"undefined"!=typeof window&&window.axios&&window.Vue&&null!=vueVersion&&vueVersion.startsWith("2.")&&install(window.Vue,window.axios);var index={install:install,version:"3.0.3"};exports.cAxios=cAxios,exports.default=index,exports.install=install,exports.version="3.0.3",Object.defineProperty(exports,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],factory):factory((global="undefined"!=typeof globalThis?globalThis:global||self).CAxios={},global.Axios);
